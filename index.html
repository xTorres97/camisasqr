<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>AR Camiseta - Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  
  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>

  <!-- MindAR -->
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.4/dist/mindar-image-aframe.prod.js"></script>

  <style>
    body, html { margin:0; padding:0; height:100%; overflow:hidden; background:#000; }
    #startBtn {
      position:fixed;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
      padding:14px 20px;
      font-size:18px;
      border-radius:10px;
      background:#ff4fa8;
      color:white;
      border:none;
      cursor:pointer;
      box-shadow:0 4px 12px rgba(255,0,100,0.4);
    }
    #note {
      position:fixed;
      bottom:10px;
      left:0; right:0;
      text-align:center;
      font-family:Arial, sans-serif;
      color:white;
      opacity:0.8;
      font-size:14px;
    }
  </style>
</head>

<body>
  <!-- Bot칩n para iniciar la c치mara -->
  <button id="startBtn">Activar AR</button>
  <div id="note">Apunta la c치mara hacia la imagen de la camiseta</div>

  <!-- Escena AR -->
  <a-scene
      mindar-image="imageTargetSrc: ./targets.mind; autoStart: false;"
      embedded
      color-space="sRGB"
      vr-mode-ui="enabled: false"
      renderer="colorManagement: true; physicallyCorrectLights: true;">

    <a-entity camera></a-entity>

    <!-- TARGET DETECTADO -->
    <a-entity mindar-image-target="targetIndex: 0">

      <!-- 游댠 ANIMACI칍N EN BUCLE 游댠 -->
      <a-entity id="animHeart" position="0 0 0">

        <!-- Esfera-luz que late y se desvanece -->
        <a-sphere 
          radius="0.01"
          color="#ff7ac8"
          opacity="0.85"

          animation__appear="property: scale; from: 0 0 0; to: 0.15 0.15 0.15; dur: 800; easing: easeOutQuad; loop: true; dir: alternate"
          animation__pulse="property: opacity; from: 0.5; to: 1; dur: 1000; loop: true; dir: alternate"
          animation__spin="property: rotation; to: 0 360 0; dur: 5000; loop: true">
        </a-sphere>

        <!-- Aro m치gico expandi칠ndose en bucle -->
        <a-ring
          radius-inner="0.02"
          radius-outer="0.022"
          color="#ff9bd5"
          opacity="0.7"
          rotation="-90 0 0"
          
          animation__grow="property: scale; from: 0.1 0.1 0.1; to: 2 2 2; dur: 2000; loop: true"
          animation__fade="property: opacity; from: 0.8; to: 0; dur: 2000; loop: true">
        </a-ring>

      </a-entity>
    </a-entity>

  </a-scene>

  <!-- Script: bot칩n para iniciar c치mara -->
  <script>
    const startBtn = document.getElementById('startBtn');
    const sceneEl = document.querySelector('a-scene');

    startBtn.addEventListener('click', async () => {
      try {
        const mindar = sceneEl.components['mindar-image'];
        await mindar.start();
        startBtn.style.display = 'none';
      } catch (err) {
        alert("Error al activar c치mara. Permite acceso o usa un navegador actualizado.");
        console.error(err);
      }
    });
  </script>

</body>
</html>
